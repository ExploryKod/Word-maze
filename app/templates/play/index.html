{% extends "layouts/default.html" %}
{% block content %}
<main>
    {% if num_turn is defined %}
    {{ num_turn }}
    {% endif %}
    {% if not user_words %}
    <section class="p-6 mx-20 bg-white rounded-xl flex items-center justify-center">
        <section class="bg-white dark:bg-gray-900">
            <div class="grid py-8 px-4 mx-auto max-w-screen-xl lg:gap-8 xl:gap-0 lg:py-16 lg:grid-cols-12">
                <div class="place-self-center mr-auto lg:col-span-6">
                    <h1
                        class="mb-4 max-w-2xl text-lg font-bold tracking-tight leading-none md:text-4xl xl:text-4xl dark:text-white">
                        Welcome in the game board</h1>
                    <a href="/play/add_data"
                        class="inline-flex justify-center items-center py-3 px-5 mr-3 text-base font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 dark:focus:ring-blue-900">
                        Start a round
                        <svg class="ml-2 -mr-1 w-5 h-5" fill="currentColor" viewBox="0 0 20 20"
                            xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd"
                                d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z"
                                clip-rule="evenodd"></path>
                        </svg>
                    </a>
                  
                </div>
                <div class="ml-[5rem] hidden lg:mt-0 lg:col-span-6 lg:flex rounded">
                    <img class="w-[90%] rounded-full"
                        src="https://images.pexels.com/photos/256417/pexels-photo-256417.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"
                        alt="scrabble">
                </div>
            </div>
        </section>
    </section>
    {% endif %}
    {% if user_words %}
    <section class="p-6 mx-20 bg-white rounded-xl flex items-center justify-center">
        <button type="button" data-modal-toggle="crypto-modal"
            class="text-gray-900 bg-white hover:bg-gray-100 border border-gray-200 focus:ring-4 focus:outline-none focus:ring-gray-100 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center dark:focus:ring-gray-600 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:bg-gray-700">
            <svg aria-hidden="true" class="mr-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1">
                </path>
            </svg>
            Reveal answer
        </button>
    {% endif %}
        {% if resp %}
        {% if resp[-1]:%}

        <!-- Main modal -->
        <div id="crypto-modal" tabindex="-1" aria-hidden="true"
            class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 w-full md:inset-0 h-modal md:h-full justify-center items-center">
            <div class="relative p-4 w-full max-w-md h-full md:h-auto">
                <!-- Modal content -->
                <div class="relative bg-white rounded-lg shadow dark:bg-gray-700">
                    <button type="button"
                        class="absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-800 dark:hover:text-white"
                        data-modal-toggle="crypto-modal">
                        <svg aria-hidden="true" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"
                            xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd"
                                d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                                clip-rule="evenodd"></path>
                        </svg>
                        <span class="sr-only">Close modal</span>
                    </button>
                    <!-- Modal header -->
                    <div class="py-4 px-6 rounded-t border-b dark:border-gray-600">
                        <h3 class="text-base font-semibold text-gray-900 lg:text-xl dark:text-white">
                            Answers
                        </h3>
                    </div>
                    <!-- Modal body -->
                    <div class="p-6">
                        <p class="text-sm font-normal text-gray-500 dark:text-gray-400">This is the words that had to be
                            found:</p>
                        <ul class="my-4 space-y-3">
                            <li>
                                <a href="#"
                                    class="flex items-center p-3 text-base font-bold text-gray-900 bg-gray-50 rounded-lg hover:bg-gray-100 group hover:shadow dark:bg-gray-600 dark:hover:bg-gray-500 dark:text-white">
                                    <svg aria-hidden="true" class="h-5" viewBox="0 0 292 292" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M145.7 291.66C226.146 291.66 291.36 226.446 291.36 146C291.36 65.5541 226.146 0.339844 145.7 0.339844C65.2542 0.339844 0.0400391 65.5541 0.0400391 146C0.0400391 226.446 65.2542 291.66 145.7 291.66Z"
                                            fill="#3259A5"></path>
                                        <path
                                            d="M195.94 155.5C191.49 179.08 170.8 196.91 145.93 196.91C117.81 196.91 95.0204 174.12 95.0204 146C95.0204 117.88 117.81 95.0897 145.93 95.0897C170.8 95.0897 191.49 112.93 195.94 136.5H247.31C242.52 84.7197 198.96 44.1797 145.93 44.1797C89.6904 44.1797 44.1104 89.7697 44.1104 146C44.1104 202.24 89.7004 247.82 145.93 247.82C198.96 247.82 242.52 207.28 247.31 155.5H195.94Z"
                                            fill="white"></path>
                                    </svg>
                                    <span class="flex-1 ml-3 whitespace-nowrap">{{resp[-1].secret_1}}</span>
                                </a>
                            </li>
                            <li>
                                <a href="#"
                                    class="flex items-center p-3 text-base font-bold text-gray-900 bg-gray-50 rounded-lg hover:bg-gray-100 group hover:shadow dark:bg-gray-600 dark:hover:bg-gray-500 dark:text-white">
                                    <svg aria-hidden="true" class="h-5" viewBox="0 0 292 292" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M145.7 291.66C226.146 291.66 291.36 226.446 291.36 146C291.36 65.5541 226.146 0.339844 145.7 0.339844C65.2542 0.339844 0.0400391 65.5541 0.0400391 146C0.0400391 226.446 65.2542 291.66 145.7 291.66Z"
                                            fill="#3259A5"></path>
                                        <path
                                            d="M195.94 155.5C191.49 179.08 170.8 196.91 145.93 196.91C117.81 196.91 95.0204 174.12 95.0204 146C95.0204 117.88 117.81 95.0897 145.93 95.0897C170.8 95.0897 191.49 112.93 195.94 136.5H247.31C242.52 84.7197 198.96 44.1797 145.93 44.1797C89.6904 44.1797 44.1104 89.7697 44.1104 146C44.1104 202.24 89.7004 247.82 145.93 247.82C198.96 247.82 242.52 207.28 247.31 155.5H195.94Z"
                                            fill="white"></path>
                                    </svg>
                                    <span class="flex-1 ml-3 whitespace-nowrap">{{resp[-1].secret_2}}</span>
                                </a>
                            </li>
                            <li>
                                <a href="#"
                                    class="flex items-center p-3 text-base font-bold text-gray-900 bg-gray-50 rounded-lg hover:bg-gray-100 group hover:shadow dark:bg-gray-600 dark:hover:bg-gray-500 dark:text-white">
                                    <svg aria-hidden="true" class="h-5" viewBox="0 0 292 292" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M145.7 291.66C226.146 291.66 291.36 226.446 291.36 146C291.36 65.5541 226.146 0.339844 145.7 0.339844C65.2542 0.339844 0.0400391 65.5541 0.0400391 146C0.0400391 226.446 65.2542 291.66 145.7 291.66Z"
                                            fill="#3259A5"></path>
                                        <path
                                            d="M195.94 155.5C191.49 179.08 170.8 196.91 145.93 196.91C117.81 196.91 95.0204 174.12 95.0204 146C95.0204 117.88 117.81 95.0897 145.93 95.0897C170.8 95.0897 191.49 112.93 195.94 136.5H247.31C242.52 84.7197 198.96 44.1797 145.93 44.1797C89.6904 44.1797 44.1104 89.7697 44.1104 146C44.1104 202.24 89.7004 247.82 145.93 247.82C198.96 247.82 242.52 207.28 247.31 155.5H195.94Z"
                                            fill="white"></path>
                                    </svg>
                                    <span class="flex-1 ml-3 whitespace-nowrap">{{resp[-1].secret_3}}</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}

    </section>
    <section class="p-6 mx-auto bg-white rounded-xl flex flex-col items-center justify-center">
            {% if resp[-1]:%}
            {% if user_words[-1] and (user_words[-1].word == resp[-1].secret_1 or user_words[-1].word == resp[-1].secret_2
            or
            user_words[-1].word == resp[-1].secret_3) %}
            <h2 class="text-center font-bold text-lg text-gray">
         
            <span>Bravo,</span>
           
            with your attempt {{player[-1].pseudo}}, you win with {{user_words[-1].word}} and gain {{points[-1].score}} points. Try to win again next turn.</h2>
    
            {% elif user_words[-1] and (user_words[-1].word != resp[-1].secret_1 or user_words[-1].word != resp[-1].secret_2
            or
            user_words[-1].word !=
            resp[-1].secret_3) %}
            <h2 class="text-center font-bold text-lg text-gray"> Be brave, try again as {{user_words[-1].word}} is not in my right hand</h2>
            {% else %}
            <h1 class="text-center font-bold text-lg text-gray">You guessed no word</h1>
            {% endif %}
            {% endif %}
    
            {%else%}
            <div class="w-full mx-auto p-5 rounded-lg">
                <p class="text-center font-bold text-lg text-gray-300">There is nothing in my hands for now, please play and I will fetch a thing</p>
            </div>
           
            {%endif%}
    </section>


    <section class="p-6 mx-20 bg-white rounded-xl flex flex-col items-center justify-center">
        {% if user_words %}
        <div class="mx-auto mt-1 min-w-[500px] max-w-screen-xl basis-3/6 rounded-lg dark:bg-gray-800">
            <div class="flex flex-col items-center justify-center">
                <a href="/play/turn" type="button"
                    class="inline-flex items-center py-2 px-3 text-sm font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
                    Play again
                    <svg aria-hidden="true" class="ml-2 -mr-1 w-4 h-4" fill="currentColor" viewBox="0 0 20 20"
                        xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd"
                            d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z"
                            clip-rule="evenodd"></path>
                    </svg>
                </a>
            </div>
        </div>
        {%endif%}
    </section>
    {% if user_words %}
    <section class="p-6 mx-20 bg-white rounded-xl flex flex-col gap-2 items-center justify-center">

        <div class="min-w-[500px] overflow-x-auto relative shadow-md sm:rounded-lg">
            <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
                <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                    <tr>
                        <th scope="col" class="py-3 px-6">
                            id
                        </th>
                        <th scope="col" class="py-3 px-6">
                            Word
                        </th>
                        <th scope="col" class="py-3 px-6">
                            Delete
                        </th>
                    </tr>
                </thead>
                <tbody>
                    {% for data in user_words %}
                    <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700">
                        <td class="py-4 px-6">{{data.id}}</td>
                        <td class="py-4 px-6">{{data.word}}</td>
                        <td class="py-4 px-6"><a href="/play/delete/{{data.id}}" class="light-blue darken-4"
                                type="button">Delete</a>
                        </td>
                    </tr>
                    {%endfor%}
                </tbody>
            </table>
        </div>
        <div class="min-w-[500px] overflow-x-auto relative shadow-md sm:rounded-lg">
            <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
                <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                <tr>
                    <th scope="col" class="py-3 px-6">
                        Attempt
                    </th>
                    <th scope="col" class="py-3 px-6">
                        Word found
                    </th>
                    <th scope="col" class="py-3 px-6">
                        Score
                    </th>
                </tr>
                </thead>
                <tbody>
                {% for data in points %}
                <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700">
                    <td class="py-4 px-6">{{data.scores_id}}</td>
                    <td class="py-4 px-6">{{data.score_object}}</td>
                    <td class="py-4 px-6">{{data.score}}
                    </td>
                </tr>
                {%endfor%}
                </tbody>
            </table>
        </div>
    </section>
    {%endif%}


</main>
{% endblock %}